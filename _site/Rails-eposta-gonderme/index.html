<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title>Rails ile Eposta Göndermek &#8211; Alperen Bozkurt</title>
    <meta name="description" content="Rails ve Gmail kullanarak örnek bir eposta gönderen uygulama yaptık.">
    <meta name="keywords" content="ActionMailler kullanımı, rails mail yollama, rails e-posta yollama, ruby gmail ile posta yollamak">
    <link rel="canonical" href="http://localhost:4000/Rails-eposta-gonderme/">
        <!-- Twitter Cards -->
    <meta name="twitter:title" content="Rails ile Eposta Göndermek">
    <meta name="twitter:description" content="Rails ve Gmail kullanarak örnek bir eposta gönderen uygulama yaptık.">
    <meta name="twitter:site" content="@bozkurttalperen">
    <meta name="twitter:creator" content="@bozkurttalperen">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="http://localhost:4000/assets/img/profile.png">
    <!-- Open Graph -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Rails ile Eposta Göndermek">
    <meta property="og:description" content="Rails ve Gmail kullanarak örnek bir eposta gönderen uygulama yaptık.">
    <meta property="og:url" content="http://localhost:4000/Rails-eposta-gonderme/">
    <meta property="og:site_name" content="Alperen Bozkurt">
    <meta property="og:image" content="http://localhost:4000/assets/img/profile.png">

    
    
    <!-- Handheld -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-144x144.png">
    <link rel="icon" type="image/png" href="http://localhost:4000/assets/img/favicon/favicon.png">
    <link rel="shortcut icon" href="http://localhost:4000/assets/img/favicon/favicon.ico">
    <!-- Feed -->
    <link rel="alternate" type="application/rss+xml" title="Alperen Bozkurt" href="http://localhost:4000/feed.xml" />
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/main.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-1746793611373653",
            enable_page_level_ads: true
        });
    </script>
</head>

  <body>
    <script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
  $(function() {
    i = 0;
    $('.menuAc').css({
      'color': 'rgba(52, 152, 219, 1)'
    });
    $('.menuAc').click(function(){
      $(this).next('.menuMobil').animate({width:'toggle'},350);
      if (i%2==0) {
        $('.footer').css({
          'filter'         : 'blur(5px)'
        });
        $('.programlar').css({
          'filter'         : 'blur(5px)'
        });
        $('.ust').css({
          'filter'         : 'blur(5px)'
        });
        $('ul.menu').css({
          'animation-duration': '0.1s'
        });
        i++;
      }
      else {
        $('.footer').css({
          'filter'         : 'blur(0px)'
        });
        $('.programlar').css({
          'filter'         : 'blur(0px)'
        });
        $('.ust').css({
          'filter'         : 'blur(0px)'
        });
        i++;
      }

    });
  });
</script>
<script type="text/javascript">
$(document).ready(function(){
    $.goup({
        trigger: 500,
        bottomOffset: 10,
        locationOffset: 20,
        containerRadius: 0,
        containerColor: '#fff',
        arrowColor: '#000',
        goupSpeed: 'normal'
    });
});
</script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', '']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-103609247-1', 'auto');
  ga('send', 'pageview');

</script>

    <div class="menuAc">
      <i class="fa fa-bars" aria-hidden="true"></i>
    </div>
    <div class="menuMobil">
          <nav class="nav-home">
        <ul class="menu">
            
				    
				    <li><a class="link" href="http://localhost:4000/">Anasayfa</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/blog/">Blog</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/projects/">Projeler</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/about/">Hakkımda</a></li>
				
        </ul>
    </nav>

    </div>
    <div class="ust">
      <div class="ortalaAna">
        <div class="baslikAna">
          Alperen Bozkurt
        </div>

        <div class="pc">
              <nav class="nav">
        <ul class="menuAna">
            
				    
				    <li class="item"><a class="link" href="http://localhost:4000/">Anasayfa</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/blog/">Blog</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/projects/">Projeler</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/about/">Hakkımda</a></li>
				
        </ul>
    </nav>

        </div>
      </div>
    </div>
    <div class="ortalaAna">
      <div class="yazilar">
        <div class="yazi">
          <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- R1 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1746793611373653" data-ad-slot="9217519248" data-ad-format="auto"></ins>
          <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </div>
        <div class="yazi">
          <div class="ustr">
            <h2>Rails ile Eposta Göndermek</h2>
            <div class="yazibilgisi">
              11 Aug 2017 tarihinde yayınlandı.
            </div>
          </div>
          <hr>
          <div class="content">
            <p>Rails uygulamalarında e-posta göndermek için ActionMailler diye bir yapı var.  Bu yazıda, bu yapıyı kullanarak bir e-posta göndereceğiz. Hızlıca başlayalım.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ rails new mail
$ rails g scaffold user name:string email:string
$ rake db:migrate 
</code></pre></div></div>

<p>Şimdi kullanıcıların kayıt olabildiği, basit bir web uygulamamız oldu. Rails generator kullanarak hızlı bir şekilde dosyalarımızı oluşturalım.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ rails g mailer kayit_mailer
</code></pre></div></div>

<p>Oluşan dosyalardan <code class="highlighter-rouge">app/mailers/kayit_mailer.rb</code> dosyasına gönderici eposta adresini ve mail gönderecek metodu oluşturmamız gerekiyor.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">KayitMailer</span> <span class="o">&lt;</span> <span class="no">ApplicationMailer</span>
  <span class="n">default</span> <span class="ss">from: </span><span class="s2">"gonderici@gmail.com"</span>

  <span class="k">def</span> <span class="nf">sample_email</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="n">user</span>
    <span class="n">mail</span><span class="p">(</span><span class="ss">to: </span><span class="vi">@user</span><span class="p">.</span><span class="nf">email</span><span class="p">,</span> <span class="ss">subject: </span><span class="s1">'Sample Email'</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Burada <code class="highlighter-rouge">sample_email</code> metodu parametre olarak bir user nesnesi alıyor ve user ‘ın eposta adresine bir mail gönderiyor. Göndereceği epostanın içeriğini ise <code class="highlighter-rouge">app/views/kayit_mailer/sample_email.html.erb</code> dosyasında ve <code class="highlighter-rouge">app/views/kayit_mailer/sample_email.text.erb</code> dosyasında düzenlememiz gerekiyor.</p>

<p><code class="highlighter-rouge">app/views/kayit_mailer/sample_email.html.erb</code>  dosyasına</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">content=</span><span class="s">'text/html; charset=UTF-8'</span> <span class="na">http-equiv=</span><span class="s">'Content-Type'</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Hi <span class="cp">&lt;%=</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      Sample mail sent using smtp.
    <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">app/views/kayit_mailer/sample_email.text.erb</code>  dosyasına</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hi <span class="cp">&lt;%=</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span>
Sample mail sent using smtp.
</code></pre></div></div>
<p>Html render edemeyen mail istemcileri için bu dosyayı oluşturmamız gerekiyor.  Gmail ayarlarımızı da yapalım.</p>

<p><code class="highlighter-rouge">/config/environments/production.rb</code> dosyamıza alt taraftaki kodları ekleyelim.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">config</span><span class="p">.</span><span class="nf">action_mailer</span><span class="p">.</span><span class="nf">delivery_method</span> <span class="o">=</span> <span class="ss">:smtp</span>
<span class="c1"># SMTP settings for gmail</span>
<span class="n">config</span><span class="p">.</span><span class="nf">action_mailer</span><span class="p">.</span><span class="nf">smtp_settings</span> <span class="o">=</span> <span class="p">{</span>
	<span class="ss">:address</span>              <span class="o">=&gt;</span> <span class="s2">"smtp.gmail.com"</span><span class="p">,</span>
	<span class="ss">:port</span>                 <span class="o">=&gt;</span> <span class="mi">587</span><span class="p">,</span>
	<span class="ss">:user_name</span>            <span class="o">=&gt;</span> <span class="s1">'gonderici@gmail.com'</span><span class="p">,</span>
	<span class="ss">:password</span>             <span class="o">=&gt;</span> <span class="s1">'gondericiSifresi'</span><span class="p">,</span>
	<span class="ss">:authentication</span>       <span class="o">=&gt;</span> <span class="s2">"plain"</span><span class="p">,</span>
	<span class="ss">:enable_starttls_auto</span> <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Tüm hazırlıkları tamamladık şimdi kısık ateşte 20 dk pişirelim. Piştikten sonra eposta gönderme işlemini tetikletmek için <code class="highlighter-rouge">user_controller.rb</code> nin create metoduna <code class="highlighter-rouge">KayitMailer.sample_email(@user).deliver</code> satırını eklememiz gerekiyor.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">create</span>
  <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">user_params</span><span class="p">)</span>

  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="k">if</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">save</span>

      <span class="c1"># Sends email to user when user is created.</span>
      <span class="no">KayitMailer</span><span class="p">.</span><span class="nf">sample_email</span><span class="p">(</span><span class="vi">@user</span><span class="p">).</span><span class="nf">deliver</span>

      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="vi">@user</span><span class="p">,</span> <span class="ss">notice: </span><span class="s1">'User was successfully created.'</span> <span class="p">}</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:show</span><span class="p">,</span> <span class="ss">status: :created</span><span class="p">,</span> <span class="ss">location: </span><span class="vi">@user</span> <span class="p">}</span>
    <span class="k">else</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:new</span> <span class="p">}</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">json: </span><span class="vi">@user</span><span class="p">.</span><span class="nf">errors</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Edit : Gmail ile eposta yollamak için <a href="https://myaccount.google.com/lesssecureapps?pli=1">bu linkten</a> hesabınıza izin vermeniz gerekiyor. Tavsiyem mail işlemleri için başka bir eposta hesabı açmanız.</p>

<p>Bu şekilde örnek bir eposta gönderme uygulaması yapmış olduk. Eğer bir yanlışım, eksiğim olmuş ise yorum yazabilirsiniz veya pull request yollayabilirsiniz. Kendinize iyi davranın.</p>

          </div>
        </div>
        
  <div id="disqus_thread" class="yazi">  </div>
  <script>

  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
  /*
  var disqus_config = function () {
  this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  */
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://alperenbozkurt-net.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

  <script id="dsq-count-scr" src="//alperenbozkurt-net.disqus.com/count.js" async></script>


      </div>
    </div>
        <div class="footer">
      <div class="ortalaAna">
        <div class="copy">
          Alperen Bozkurt © 2019
        </div>
        <div class="sosyal">
                        <div class="social-links">
                  <a href="mailto:bozkurttalperen@gmail.com" class="author-social" target="_blank"><i class="fa fa-2x fa-envelope-square"></i></a>
                  <a href="http://twitter.com/bozkurttalperen" class="author-social" target="_blank"><i class="fa fa-2x fa-twitter-square"></i></a>
                  
                  
                  <a href="http://linkedin.com/in/alperenbozkurt" class="author-social" target="_blank"><i class="fa fa-2x fa-linkedin-square"></i></a>
                  
                  
                  
                  <a href="http://github.com/alperenbozkurt" class="author-social" target="_blank"><i class="fa fa-2x fa-github"></i></a>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
            </div>

        </div>
      </div>
    </div>

  </body>
</html>
