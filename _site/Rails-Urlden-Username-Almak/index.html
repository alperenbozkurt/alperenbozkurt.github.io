<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title>Rails Urlden Username Almak &#8211; Alperen Bozkurt</title>
    <meta name="description" content="Ruby on rails’de get parametresi ile id yerine username nasıl alınır.">
    <meta name="keywords" content="Ruby, Rails, devise, get ile username almak, profil linkini username ile oluşturmak, profil sayfasına username ile girmek">
    <link rel="canonical" href="http://localhost:4000/Rails-Urlden-Username-Almak/">
        <!-- Twitter Cards -->
    <meta name="twitter:title" content="Rails Urlden Username Almak">
    <meta name="twitter:description" content="Ruby on rails’de get parametresi ile id yerine username nasıl alınır.">
    <meta name="twitter:site" content="@aIperenbozkurt">
    <meta name="twitter:creator" content="@aIperenbozkurt">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="http://localhost:4000/assets/img/profile-2.jpg">
    <!-- Open Graph -->
    <meta property="og:locale" content="en">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Rails Urlden Username Almak">
    <meta property="og:description" content="Ruby on rails’de get parametresi ile id yerine username nasıl alınır.">
    <meta property="og:url" content="http://localhost:4000/Rails-Urlden-Username-Almak/">
    <meta property="og:site_name" content="Alperen Bozkurt">
    <meta property="og:image" content="http://localhost:4000/assets/img/profile-2.jpg">

    
    
    <!-- Handheld -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-144x144.png">
    <link rel="icon" type="image/png" href="http://localhost:4000/assets/img/favicon/favicon.png">
    <link rel="shortcut icon" href="http://localhost:4000/assets/img/favicon/favicon.ico">
    <!-- Feed -->
    <link rel="alternate" type="application/rss+xml" title="Alperen Bozkurt" href="http://localhost:4000/feed.xml" />
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/main.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-1746793611373653",
            enable_page_level_ads: true
        });
    </script>
</head>

  <body>
    <script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
  $(function() {
    i = 0;
    $('.menuAc').css({
      'color': 'rgba(52, 152, 219, 1)'
    });
    $('.menuAc').click(function(){
      $(this).next('.menuMobil').animate({width:'toggle'},350);
      if (i%2==0) {
        $('.footer').css({
          'filter'         : 'blur(5px)'
        });
        $('.programlar').css({
          'filter'         : 'blur(5px)'
        });
        $('.ust').css({
          'filter'         : 'blur(5px)'
        });
        $('ul.menu').css({
          'animation-duration': '0.1s'
        });
        i++;
      }
      else {
        $('.footer').css({
          'filter'         : 'blur(0px)'
        });
        $('.programlar').css({
          'filter'         : 'blur(0px)'
        });
        $('.ust').css({
          'filter'         : 'blur(0px)'
        });
        i++;
      }

    });
  });
</script>
<script type="text/javascript">
$(document).ready(function(){
    $.goup({
        trigger: 500,
        bottomOffset: 10,
        locationOffset: 20,
        containerRadius: 0,
        containerColor: '#fff',
        arrowColor: '#000',
        goupSpeed: 'normal'
    });
});
</script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', '']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-103609247-1', 'auto');
  ga('send', 'pageview');

</script>

    <div class="menuAc">
      <i class="fa fa-bars" aria-hidden="true"></i>
    </div>
    <div class="menuMobil">
          <nav class="nav-home">
        <ul class="menu">
            
				    
				    <li><a class="link" href="http://localhost:4000/">Home</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/blog/">Blog</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/projects/">Projects</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/about/">About Me</a></li>
				
        </ul>
    </nav>

    </div>
    <div class="ust">
      <div class="ortalaAna">
        <div class="baslikAna">
          Alperen Bozkurt
        </div>

        <div class="pc">
              <nav class="nav">
        <ul class="menuAna">
            
				    
				    <li class="item"><a class="link" href="http://localhost:4000/">Home</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/blog/">Blog</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/projects/">Projects</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/about/">About Me</a></li>
				
        </ul>
    </nav>

        </div>
      </div>
    </div>
    <div class="ortalaAna">
      <div class="yazilar">
        <div class="yazi">
          <div class="ustr">
            <h2>Rails Urlden Username Almak</h2>
            <div class="yazibilgisi">
              21 Aug 2017 tarihinde yayınlandı.
            </div>
          </div>
          <hr>
          <div class="content">
            <p>Google, Twitter, İnstagram ve diğerleri artık user_id yi urlden almıyor.Daha anlamlı daha akılda kalıcı şeyler kullanıyorlar. <strong>Username</strong>. Artık <strong>username</strong>‘lerimiz bizim <strong>benzersiz idlerimiz</strong> olmaya başladı. Peki internetin öncüleri böyle yapıyor da biz neden eski sitilde devam ediyoruz ?</p>

<p><code class="language-plaintext highlighter-rouge">http://site.com/users/121331231</code> olarak girdiğimiz kullanıcı sayfasına <code class="language-plaintext highlighter-rouge">http://site.com/alperenbozkurt</code> olarak girmek daha kolay ve akılda kalıcı olmaz mıydı? Tabi ki olurdu.O zaman bizde örnek bir Rails uygulaması ile bunu yapalım.Olay gayet basit. routes.rb dosyasında oynama yapacağız ve show actionunda biraz değişiklik yapacağız.</p>

<p><strong>Name</strong>, <strong>surname</strong>, <strong>email</strong> ve <strong>username</strong> alanları olan bir users modelimiz olduğunu düşünelim. <strong>routes.rb</strong> bu model routes.rb dosyasında <code class="language-plaintext highlighter-rouge">resources :users</code> şeklinde  çağırılıyor bu yapıya göre kayıt olan bir kişi <strong>REST mimarisine</strong> uygun bir şekilde <code class="language-plaintext highlighter-rouge">/users/1</code> olarak kendi profil sayfasına gidecek. <strong>routes.rb</strong> dosyamızı şu şekilde düzenleyelim;</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">resources</span> <span class="ss">:users</span><span class="p">,</span> <span class="ss">except: </span><span class="p">[</span><span class="ss">:show</span><span class="p">]</span>
  <span class="n">get</span> <span class="s1">'/:username'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'users#show'</span><span class="p">,</span> <span class="ss">as: </span><span class="s1">'profile'</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Tamam ama şimdi biz burada ne yazdık. Sitemize bir <strong>‘/birşey’</strong> şeklinde bir <strong>get</strong> isteği gelirse onu <strong>UsersController</strong>‘ın <strong>Show</strong> action’ına yönlendir. <strong>profile_path</strong> şeklinde yazarak da railsin içerisinde kullanabileceğiz. <strong>Except</strong> ile de gereksiz kalabalıktan kurtulduk. Show action’ını kendimiz yazdığımız için, resources’deki yönlendirmeye gerek kalmadı.</p>

<p>Peki, linke bir kullanıcı adı verdiğimizde show action’ını çalışıyor burada ne yapmamız gerekiyor.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">username: </span><span class="n">params</span><span class="p">[</span><span class="ss">:username</span><span class="p">])</span>
  <span class="k">end</span>
</code></pre></div></div>

<p>Bu şekilde artık <strong><a href="https://github.com/user" class="user-mention">@user</a></strong> değişkeni, veritabanında kayıtlı olan username’in bilgileri ile doluyor. Artık view ve controller katmanındaki linkleri <strong>profile_path</strong> şeklinde vermeliyiz. Örneğin link_to metodunu kullanıcaksak;</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%</span> <span class="vi">@users</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span><span class="cp">&lt;%=</span> <span class="n">user</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;td&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Profili'</span><span class="p">,</span> <span class="n">profile_path</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="nf">username</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>Gibi kullanabiliriz. Kontrol katmanında da aynı şekilde, mesela bir kayıt işleminde;</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">if</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">save</span>
    <span class="n">redirect_to</span> <span class="n">profile_path</span><span class="p">(</span><span class="vi">@user</span><span class="p">.</span><span class="nf">username</span><span class="p">),</span> <span class="ss">notice: </span><span class="s1">'Kullanıcı başarıyla oluşturuldu.'</span>
  <span class="k">else</span>
</code></pre></div></div>
<p>Şeklinde kullanabiliriz. Username’in eşsiz olduğuna dikkat edilmeli yoksa ortalık karışabilir. Username’i eşsiz yapmak için user model dosyasın’a alttaki satırı ekleyebilirsiniz.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">validates</span> <span class="ss">:username</span><span class="p">,</span> <span class="ss">uniqueness: </span><span class="p">{</span><span class="ss">message: </span><span class="s1">'zaten kullanıyor Lütfen başka bir kullanıcı adı seçiniz.'</span><span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Bu yazı da bu kadar. Bir yanlışım olmuşsa yada klavyem sürçmüşse, yorum kısmından veya e-posta ile bana bildirebilirsiniz.</p>

          </div>
        </div>
        
  <div id="disqus_thread" class="yazi">  </div>
  <script>

  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://alperenbozkurt-net.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

  <script id="dsq-count-scr" src="//alperenbozkurt-net.disqus.com/count.js" async></script>


      </div>
    </div>
        <div class="footer">
      <div class="ortalaAna">
        <div class="copy">
          Alperen Bozkurt © 2024
        </div>
        <div class="sosyal">
                        <div class="social-links">
                  <a href="mailto:mail@alperenbozkurt.net" class="author-social" target="_blank"><i class="fa fa-2x fa-envelope-square"></i></a>
                  <a href="http://twitter.com/aIperenbozkurt" class="author-social" target="_blank"><i class="fa fa-2x fa-twitter-square"></i></a>
                  
                  
                  <a href="http://linkedin.com/in/alperenbozkurt" class="author-social" target="_blank"><i class="fa fa-2x fa-linkedin-square"></i></a>
                  
                  <a href="http://instagram.com/alperen.bozkurt" class="author-social" target="_blank"><i class="fa fa-2x fa-instagram"></i></a>
                  
                  <a href="http://github.com/alperenbozkurt" class="author-social" target="_blank"><i class="fa fa-2x fa-github"></i></a>
                  
                  
                  
                  
                  
                  <a href="http://steamcommunity.com/id/bozkurttalperen" class="author-social" target="_blank"><i class="fa fa-2x fa-steam-square"></i></a>
                  
                  
                  
                  
                  
            </div>

        </div>
      </div>
    </div>

  </body>
</html>
